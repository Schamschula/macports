# $Id: Portfile 112586 2013-10-27 12:50:31Z ryandesign@macports.org $

PortSystem          1.0
PortGroup           xcode 1.0

name                LaTeXiT
version             2.7.5
set und_vers        [string map {. _} ${version}]
categories          tex aqua
license             CeCILL-2
platforms           darwin
maintainers         nomaintainer
description         Drag-and-drop LaTeX support for Mac applications

long_description    \
    LaTeXiT is a small utility that allows you to quickly typeset LaTeX \
    equations, without bothering with file creation, preambles, and so on. \
    The PDF image obtained can then be exported by drag'n drop to any \
    application supporting it. This is very useful to insert equations in \
    presentations made with Keynote or Powerpoint. LaTeXiT also features an \
    application service, so that you can type and transform equations \
    directly in most text editors (Pages, Nisus Writer Express, TextEdit...).

homepage            http://pierre.chachatelier.fr/programmation/latexit_en.php
master_sites        http://www.chachatelier.fr/latexit/downloads/
distname            ${name}-source-${und_vers}
use_zip             yes

depends_run         bin:gs:ghostscript \
                    bin:pdftex:texlive-basic

depends_lib	        port:openssl

worksrcdir          ${name}-mainline
xcode.target        "Automator-CreateEquations" "LaTeXiT Helper" "LaTeXiT"
xcode.configuration "Development"

checksums           rmd160  44da6506417dc7dc5c44e3336e23e630e32c625a \
                    sha256  d83a622bc8fa481ad6b06936ccb0d77b6c108896020a59a35c858b0bf5c63629

patchfiles          patch-LaTeXiT.xcodeproj-project.pbxproj.diff \
                    patch-MyImageView.m.diff \
                    patch-NSDataExtended.m.diff

post-patch {
    reinplace "s|/usr/bin/amlint|xcrun amlint|g" ${worksrcpath}/LaTeXiT.xcodeproj/project.pbxproj
}

livecheck.type      regex
livecheck.url       http://pierre.chachatelier.fr/latexit/latexit-downloads.php?lang=en
livecheck.regex     "Version (\\d+(?:\\.\\d+)*)"
