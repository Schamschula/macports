--- Makefile.orig	2019-06-24 11:08:57.000000000 -0500
+++ Makefile	2020-08-01 19:18:22.000000000 -0500
@@ -8,17 +8,17 @@
 #
 OFLAGS = -O0 -g
 OFLAGS  = -O2
-CFLAGS  = -std=gnu99 -fPIC -Wall -Wno-format-truncation $(OFLAGS)
+CFLAGS  = -std=gnu99 -fPIC -Wall $(OFLAGS)
 
 SHELL = /bin/sh
 TAR = tar
 INSTALL = install
 
-PREFIX = /usr/local
-BINDIR = $(PREFIX)/bin
-INCDIR = $(PREFIX)/include
-LIBDIR = $(PREFIX)/lib
-MANDIR = $(PREFIX)/share/man
+PREFIX = /opt/local
+BINDIR = $(PREFIX)/bin/giflib5/bin
+INCDIR = $(PREFIX)/include/giflib5/include
+LIBDIR = $(PREFIX)/lib/giflib5/lib
+MANDIR = $(PREFIX)/share/man/giflib5/man
 
 # No user-serviceable parts below this line
 
@@ -59,29 +59,30 @@
 	gifsponge \
 	gifwedge
 
-LDLIBS=libgif.a -lm
+LDLIBS=libgif.dylib -lm
 
-all: libgif.so libgif.a libutil.so libutil.a $(UTILS)
+all: libgif.dylib libutil.dylib libutil.a $(UTILS)
 	$(MAKE) -C doc
+# libgif.a libutil.a
 
-$(UTILS):: libgif.a libutil.a
+$(UTILS):: libgif.dylib libutil.dylib
 
-libgif.so: $(OBJECTS) $(HEADERS)
-	$(CC) $(CFLAGS) -shared $(LDFLAGS) -Wl,-soname -Wl,libgif.so.$(LIBMAJOR) -o libgif.so $(OBJECTS)
+libgif.dylib: $(OBJECTS) $(HEADERS)
+	$(CC) $(CFLAGS) -dynamiclib $(LDFLAGS) -install_name libgif.$(LIBMAJOR).dylib -o libgif.dylib $(OBJECTS)
 
 libgif.a: $(OBJECTS) $(HEADERS)
 	$(AR) rcs libgif.a $(OBJECTS)
 
-libutil.so: $(UOBJECTS) $(UHEADERS)
-	$(CC) $(CFLAGS) -shared $(LDFLAGS) -Wl,-soname -Wl,libutil.so.$(LIBMAJOR) -o libutil.so $(UOBJECTS)
+libutil.dylib: $(UOBJECTS) $(UHEADERS)
+	$(CC) $(CFLAGS) -dynamiclib $(LDFLAGS) -install_name libutil.$(LIBMAJOR).dylib -o libutil.dylib $(UOBJECTS)
 
 libutil.a: $(UOBJECTS) $(UHEADERS)
 	$(AR) rcs libutil.a $(UOBJECTS)
 
 clean:
-	rm -f $(UTILS) $(TARGET) libgetarg.a libgif.a libgif.so libutil.a libutil.so *.o
-	rm -f libgif.so.$(LIBMAJOR).$(LIBMINOR).$(LIBPOINT)
-	rm -f libgif.so.$(LIBMAJOR)
+	rm -f $(UTILS) $(TARGET) libgetarg.a libgif.a libgif.dylib libutil.a libutil.dylib *.o
+	rm -f libgif.$(LIBMAJOR).$(LIBMINOR).$(LIBPOINT).dylib
+	rm -f libgif.$(LIBMAJOR).dylib
 	rm -fr doc/*.1 *.html doc/staging
 
 check: all
@@ -99,9 +100,9 @@
 install-lib:
 	$(INSTALL) -d "$(DESTDIR)$(LIBDIR)"
 	$(INSTALL) -m 644 libgif.a "$(DESTDIR)$(LIBDIR)/libgif.a"
-	$(INSTALL) -m 755 libgif.so "$(DESTDIR)$(LIBDIR)/libgif.so.$(LIBVER)"
-	ln -sf libgif.so.$(LIBVER) "$(DESTDIR)$(LIBDIR)/libgif.so.$(LIBMAJOR)"
-	ln -sf libgif.so.$(LIBMAJOR) "$(DESTDIR)$(LIBDIR)/libgif.so"
+	$(INSTALL) -m 755 libgif.dylib "$(DESTDIR)$(LIBDIR)/libgif.$(LIBVER).dylib"
+	ln -sf libgif.$(LIBVER).dylib "$(DESTDIR)$(LIBDIR)/libgif.$(LIBMAJOR).dylib"
+	ln -sf libgif.$(LIBMAJOR).dylib "$(DESTDIR)$(LIBDIR)/libgif.dylib"
 install-man:
 	$(INSTALL) -d "$(DESTDIR)$(MANDIR)/man1"
 	$(INSTALL) -m 644 doc/*.1 "$(DESTDIR)$(MANDIR)/man1"
@@ -112,7 +113,7 @@
 	rm -f "$(DESTDIR)$(INCDIR)/gif_lib.h"
 uninstall-lib:
 	cd "$(DESTDIR)$(LIBDIR)" && \
-		rm -f libgif.a libgif.so libgif.so.$(LIBMAJOR) libgif.so.$(LIBVER)
+		rm -f libgif.a libgif.dylib libgif.$(LIBMAJOR).dylib libgif.$(LIBVER).dylib
 uninstall-man:
 	cd "$(DESTDIR)$(MANDIR)/man1" && rm -f $(shell cd doc >/dev/null && echo *.1)
 
