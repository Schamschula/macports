# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4
# $Id$

PortSystem          1.0


name                nghttp2
version             0.7.4
categories          www
license             MIT
maintainers         gmail.com:mschamschula openmaintainer
description         nghttp2 is an implementation of HTTP/2 in C.
long_description    ${description}
platforms           darwin
homepage            http://nghttp2.org
master_sites        https://github.com/tatsuhiro-t/nghttp2/releases/download/v${version}
use_xz              yes

checksums           rmd160 e9d10e154c28471815e52f9aaee7a275fe735f28 \
                    sha256 fb71dddd7b94c8af83cb6a89b76f30ebbe1e8b0085997c370934dd57667be8f6

depends_build       port:pkgconfig \
                    port:py27-sphinx

depends_lib         port:boost \
                    port:jansson \
                    port:libev \
                    port:libevent \
                    port:libxml2 \
                    port:openssl \
                    port:py27-cython \
                    port:python27 \
                    port:zlib

configure.args      --disable-threads --with-boost=${prefix}

configure.env       PYTHON=${prefix}/bin/python2.7 CYTHON=${prefix}/bin/cython-2.7 \
                    JANSSON_CFLAGS=-I${prefix}/include JANSSON_LIBS="-L${prefix}/lib -ljansson" \
                    LIBEVENT_OPENSSL_CFLAGS=-I${prefix}/include/event2 \
                    LIBEVENT_OPENSSL_LIBS="-L${prefix}/lib -levent -levent_openssl" \
                    OPENSSL_CFLAGS=-I${prefix}/include/openssl \
                    OPENSSL_LIBS="-L${prefix}/lib -lcrypto -lssl"

livecheck.type      regex
livecheck.url       https://github.com/tatsuhiro-t/nghttp2/tags
livecheck.regex     "v${version}"
